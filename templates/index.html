<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brain Cancer Database</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <header>
        <h1>Brain Cancer Database</h1>
    </header>
    <main>
        <div class="tabs">
            <button class="tab-button active" data-tab="about">About</button>
            <button class="tab-button" data-tab="search">Search</button>
            <button class="tab-button" data-tab="features">Features</button>
			 <button class="tab-button" data-tab="peptidecutter">Peptide cutter</button>
			  <button class="tab-button" data-tab="Open Reading Frames">Open Reading Frames tool</button>
			  <button class="tab-button" data-tab="Calculate GC Content">Calculate GC Content tool</button>
        </div>
        
     <div class="tab-content active" id="about">
    <h3 class="text-primary">Understanding Brain Cancer</h3>
    <section class="intro-section">
        <p>
            Brain cancer is a complex and challenging disease that occurs when abnormal cells grow uncontrollably within the brain. 
            These abnormal cells form tumors, which can disrupt brain functions such as memory, motor skills, and emotions. 
            Brain cancer can be either primary, originating in the brain itself, or secondary, when cancer from other parts of the body spreads to the brain. 
            Despite its rarity, brain cancer remains one of the most devastating forms of cancer due to its impact on the central nervous system.
        </p>
    </section>
    <section class="highlighted-facts">
        <h3 class="text-secondary">Key Insights</h3>
        <div class="facts-container">
            <div class="fact">
                <h4>What Is Brain Cancer?</h4>
                <p>
                    Brain cancer refers to malignant tumors that arise from abnormal cell growth in the brain. These tumors can affect brain functions such as movement, cognition, and vision.
                </p>
            </div>
            <div class="fact">
                <h4>Symptoms</h4>
                <p>
                    Common symptoms of brain cancer include persistent headaches, vision problems, nausea, seizures, memory loss, and changes in personality.
                </p>
            </div>
            <div class="fact">
                <h4>Types of Brain Cancer</h4>
                <p>
                    Brain cancers are categorized based on their cell type and location. Gliomas, meningiomas, and metastases are some of the most common types of brain tumors.
                </p>
            </div>
        </div>
    </section>
    <section class="treatment-section">
        <h3>Treatment and Prognosis</h3>
        <p>
            Treatments for brain cancer typically involve surgery, radiation therapy, and chemotherapy. In recent years, targeted therapies and immunotherapies have shown promise in treating brain tumors. However, treatment efficacy varies greatly depending on the tumor type, size, and location. Early detection is key to improving survival rates, but outcomes remain uncertain for many patients.
        </p>
    </section>
    <section class="image-section">
        <h3>Visualizing Brain Cancer</h3>
        <p>Below is a visual representation of a brain affected by cancer. This image highlights the areas of the brain where tumors commonly form, aiding in understanding their impact on brain functions.</p>
       <img src="{{ url_for('static', filename='images/img.jpg') }}">
    </section>
    <section class="mission-section">
        <h3>Our Vision</h3>
        <p>
            The <strong>Brain Cancer Research Foundation</strong> is dedicated to advancing research into the causes, treatments, and cures for brain cancer. By providing crucial data and supporting innovative studies, we aim to improve early detection, treatment strategies, and ultimately, survival rates for patients battling this devastating disease.
        </p>
    </section>
</div>
<div class="tab-content" id="search">       
<div class="container mt-5">
        <h3 class="text-center">Search Gene Names</h3>
        <form method="POST">
            <div class="form-group position-relative">
                <label for="gene_name">Gene Name:</label>
                <input type="text" class="form-control" id="gene_name" name="gene_name" placeholder="Enter gene name" value="{{ gene_name }}">
                <div id="suggestion-box" class="suggestion-box" style="display: none;"></div>
            </div>
            <center><button type="submit" class="btn btn-primary">Search</button></center>
        </form>

        <center><button id="clear-input" class="btn btn-danger" style="margin-top: 10px;"> Clear</button></center>

        <div class="mt-4">
            <h3>Search Results:</h3>
            <div class="table-container">
                {% if tables %}
                    {% for table in tables %}
                        {{ table|safe }}
                    {% endfor %}
                {% endif %}
            </div>
        </div>
   </div>
</div>
  <div class="tab-content" id="features">
    <h3>Key Features of the Dataset</h3>
    <div class="feature-container">
        <div class="feature-item">
            <h4><strong>Comprehensive Protein Information:</strong></h4>
            <p>Detailed names and gene associations for 50 proteins linked to brain cancer.</p>
        </div>
        <div class="feature-item">
            <h4><strong>Organism-Specific Data:</strong></h4>
            <p>All proteins are derived from <em>Homo sapiens</em> (Human).</p>
        </div>
        <div class="feature-item">
            <h4><strong>Sequence Lengths:</strong></h4>
            <p>Protein lengths range from 465 to 1255 amino acids, providing structural diversity.</p>
        </div>
        <div class="feature-item">
            <h4><strong>Subcellular Localization:</strong></h4>
            <p>Insights into where these proteins function, including nucleus, cytoplasm, membrane, and more.</p>
        </div>
        <div class="feature-item">
            <h4><strong>Post-Translational Modifications:</strong></h4>
            <p>Information on phosphorylation, acetylation, glycosylation, and other modifications, crucial for understanding protein activity regulation.</p>
        </div>
        <div class="feature-item">
            <h4><strong>Mutagenesis Data:</strong></h4>
            <p>Indicates proteins with known mutagenesis studies, helping researchers understand the effects of specific mutations.</p>
        </div>
        <div class="feature-item">
            <h4><strong>Protein Domains:</strong></h4>
            <p>Details on functional domains available for most proteins, aiding in structural and functional analysis.</p>
        </div>
        <div class="feature-item">
            <h4><strong>Structural Insights:</strong></h4>
            <p>Links to 3D structures and sequence information via UniProt for in-depth research.</p>
        </div>
        <div class="feature-item">
            <h4><strong>Mass and Size:</strong></h4>
            <p>Proteins range from 51,641 to 137,910 Daltons, highlighting molecular diversity and providing clues about protein stability and function.</p>
        </div>
    </div>

</div>

<div class="tab-content active" id="peptidecutter">
<title>Peptide Cutter</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    textarea {
      width: 100%;
      height: 100px;
    }
    .output {
      margin-top: 10px;
      padding: 5px;
      border: 1px solid #ccc;
      background-color: #f9f9f9;
    }
</style>
  <h1>Peptide Cutter</h1>
  <p>Enter your protein sequence below:</p>
  <textarea id="protein-sequence" placeholder="Enter protein sequence (e.g., MKTLLILTCLVAVALAR)"></textarea>
  <button id="cut-protein">Cut Protein</button>
  <h3>Resulting Peptides:</h3>
  <div class="output" id="output"></div>

<script>
    function cutPeptides(sequence, enzyme) {
      let regex;
      if (enzyme === "trypsin") {
        // Trypsin cuts after K or R, except when followed by P
        regex = /(?<=[KR])(?!P)/g;
      } else {
        alert("Only trypsin is supported in this demo.");
        return [];
      }

      // Perform the cleavage
      const peptides = sequence.split(regex);
      return peptides;
    }

    document.getElementById("cut-protein").addEventListener("click", function () {
      const sequence = document.getElementById("protein-sequence").value.trim();
      if (!sequence) {
        alert("Please enter a protein sequence.");
        return;
      }

      // Validate the sequence (only amino acids allowed)
      if (!/^[ACDEFGHIKLMNPQRSTVWY]+$/i.test(sequence)) {
        alert("Invalid sequence. Only amino acid letters (ACDEFGHIKLMNPQRSTVWY) are allowed.");
        return;
      }

      // Cut the sequence with trypsin
      const peptides = cutPeptides(sequence.toUpperCase(), "trypsin");

      // Display the resulting peptides
      const output = document.getElementById("output");
      output.innerHTML = peptides.length > 0
        ? peptides.map((pep, index) => `<p><strong>Peptide ${index + 1}:</strong> ${pep}</p>`).join("")
        : "<p>No peptides generated.</p>";
    });
 </script>
</div>

<div class="tab-content active" id="Open Reading Frames">
	<style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #f9f9f9;
            text-align: center;
        }
        textarea {
            width: 400px;
            height: 150px;
            margin: 20px 0;
        }
        button {
            margin: 10px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
        #orfResults {
            margin-top: 20px;
            width: 80%;
            height: 300px;
            overflow: auto;
            border: 1px solid #ccc;
            padding: 10px;
            background-color: #f4f4f4;
            white-space: pre-wrap;
            text-align: left;
        }
    </style>

    <h1>Open Reading Frames (ORFs)</h1>
    <p>Enter a DNA sequence and click "Find ORFs" to identify the open reading frames (ORFs) in the sequence.</p>
    <textarea id="dnaInput" placeholder="Enter DNA sequence (e.g., ATGCCTACTAAAATTCCGGG)" ></textarea>
    <button onclick="findORFs()">Find ORFs</button>
    <div id="orfResults">ORF results will appear here.</div>

    <script>
        function findORFs() {
            const sequence = document.getElementById("dnaInput").value.toUpperCase();
            const startCodons = ["ATG"];
            const stopCodons = ["TAA", "TAG", "TGA"];
            let results = [];

            // Loop through the sequence to find all ORFs
            for (let i = 0; i < sequence.length - 2; i++) {
                const codon = sequence.substring(i, i + 3);
                // Check for start codon
                if (startCodons.includes(codon)) {
                    let j = i;
                    // Look for stop codon after the start codon
                    while (j < sequence.length - 2) {
                        const stopCodon = sequence.substring(j, j + 3);
                        if (stopCodons.includes(stopCodon)) {
                            results.push(sequence.substring(i, j + 3)); // Capture the ORF
                            break;
                        }
                        j += 3; // Move to the next codon
                    }
                }
            }

            // Display the results in the results div
            if (results.length > 0) {
                document.getElementById("orfResults").innerText = "Found the following ORFs:\n\n" + results.join("\n\n");
            } else {
                document.getElementById("orfResults").innerText = "No ORFs found in the given sequence.";
            }
        }
    </script>
</div>

<div class="tab-content active" id="Calculate GC Content">
    <style>
       
        input[type="file"] {
            padding: 10px;
            margin-top: 20px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
           
            margin-top: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
        }
        
        #gcContentResults {
            margin-top: 20px;
        }
        .error {
            color: red;
        }
    </style>

    <h1>GC Content Calculator from FASTA File</h1>
    <p>Upload a FASTA file to calculate the GC content:</p>

    <input type="file" id="fastaFile" accept=".fasta, .fa">
    <button onclick="calculateGCContent()">Calculate GC Content</button>

    <div id="gcContentResults"></div>

    <script>
        function calculateGCContent() {
            const fileInput = document.getElementById('fastaFile');
            const file = fileInput.files[0];

            // Validate file selection
            if (!file) {
                document.getElementById("gcContentResults").innerHTML = "<span class='error'>Please upload a FASTA file.</span>";
                return;
            }

            const reader = new FileReader();

            reader.onload = function(event) {
                const fastaData = event.target.result;
                const sequence = extractSequence(fastaData);
                if (sequence) {
                    const gcContent = calculateGC(sequence);
                    document.getElementById("gcContentResults").innerHTML = `GC Content: ${gcContent.toFixed(2)}%`;
                } else {
                    document.getElementById("gcContentResults").innerHTML = "<span class='error'>Invalid FASTA format or empty sequence.</span>";
                }
            };

            reader.readAsText(file);
        }

        function extractSequence(fastaData) {
            // Remove all headers (lines starting with '>') and join the sequence lines
            const lines = fastaData.split('\n');
            const sequenceLines = lines.filter(line => !line.startsWith('>')).join('');
            return sequenceLines.toUpperCase().replace(/[^ATGC]/g, ''); // Only valid bases
        }

        function calculateGC(sequence) {
            const gcCount = (sequence.match(/[GC]/g) || []).length;
            const atCount = (sequence.match(/[AT]/g) || []).length;
            const totalBases = gcCount + atCount;

            if (totalBases === 0) return 0; // Avoid division by zero if the sequence is empty or invalid
            return (gcCount / totalBases) * 100;
        }
</script>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/3Dmol/2.0.3/3Dmol-min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

</main>

    <script src="{{ url_for('static', filename='js/scripts.js') }}"></script> 
</body>
</html>
